---
title: "Example dashboard with dynamic data"        # Título del dashboard
output:
  flexdashboard::flex_dashboard:
    orientation: rows                               # Distribución por filas
    source_code: embed                              # Botón para ver el código fuente
    theme: yeti                                     # Tema visual (Bootswatch)
runtime: shiny                                       # Backend reactivo con Shiny
---


```{r setup, include=FALSE}
library(tidyverse)                                   # Manipulación de datos
library(flexdashboard)                               # Componentes del dashboard
library(plotly)                                      # Gráficos interactivos
library(readr)                                       # Lectura de CSV

```

```{r get-data, message=FALSE, include=FALSE}
## Lectura de datos
remote_data <- read_csv("Datos_Ejemplo.csv")  # Cargar datos externos
```

## Row

### Categories {.value-box}

```{r}
# Número de categorías únicas
n_categories <- remote_data %>% distinct(Category) %>% nrow()

# valueBox reactivo (necesita renderValueBox)
renderValueBox({
  valueBox(value = n_categories, icon = "fas fa-users")
})
```

### Total {.value-box}

```{r}
# Suma total de la columna Count
total <- sum(remote_data$Count)

# valueBox reactivo
renderValueBox({
  valueBox(value = total, icon = "fas fa-cubes")
})
```

## Row

###

```{r}
# Gráfico de barras interactivo con Plotly
library(plotly)

plot_ly(remote_data,
        x = ~Category,                                    # Eje X: categorías
        y = ~Count,                                       # Eje Y: valores
        type = "bar",                                     # Gráfico de barras
        text = ~paste("Categoría:", Category,             # Texto del hover
                      "<br>Count:", Count),
        hoverinfo = "text")                               # Mostrar solo el texto

```
